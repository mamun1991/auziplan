function fetch_companygetails(){$.ajax({type:"POST",url:siteUrl+"company_setup/ajax-getcompany_details",dataType:"json",data:{},success:function(e){setMymodalform(e),checkempty()}})}function get_companydetails(){$.ajax({type:"POST",url:siteUrl+"company_setup/ajax-getcompany_details",dataType:"json",data:{},success:function(e){setMymodalform(e),checkempty(),$("#myModal").modal("show")}})}function checkempty(){$("input").each(function(e){""!=$(this).val()&&$(this).parent("div").removeClass("is-empty")})}function setMymodalform(e){if(populateCountries("country","state"),null!=e.company_detail){if(e.company_detail.start_date){var t=e.company_detail.start_date,a=new Date(t);$("#start_date").daterangepicker({dateFormat:"mm/dd/yyyy",singleDatePicker:!0}).datepicker("setDate",a)}""!=e.company_detail.company_logo&&(compath=siteUrl+"assets/uploads/company_logo/"+e.company_detail.company_logo,$("#company_logo").fileinput({overwriteInitial:!0,maxFileSize:500,showClose:!1,showCaption:!1,browseLabel:"",removeLabel:"",previewClass:"company_setup",browseIcon:'<i class="fa fa-folder-open"></i>',removeIcon:'<i class="fa fa-remove"></i>',removeTitle:"Cancel or reset changes",elErrorContainer:"#kv-avatar-errors-1",msgErrorClass:"alert alert-block alert-danger",defaultPreviewContent:'<img id="imgcompany" class="img-circle" src="'+compath+'" alt="Company Logo" style="width:130px;">',layoutTemplates:{main2:"{preview}  {remove} {browse}"},allowedFileExtensions:["jpg","png","gif"]})),$("#company_id").val(e.company_detail.id),$("#company_name").val(e.company_detail.company_name),$("#abn_no").val(e.company_detail.abn_no),$("#register_no").val(e.company_detail.register_no),$("#country").val(e.company_detail.country).trigger("change"),$("#cmpy_structure").val(e.company_detail.cmpy_structure).trigger("change"),$("#industry").val(e.company_detail.industry).trigger("change"),$("#currency").val(e.company_detail.currency).trigger("change"),$("#financial_year").val(e.company_detail.financial_year),$("#street_no").val(e.company_detail.street_no),$("#street_name").val(e.company_detail.street_name),$("#suburb").val(e.company_detail.suburb),$("#state").val(e.company_detail.state).trigger("change"),$("#zipcode").val(e.company_detail.zipcode),$("#telephone").val(e.company_detail.telephone),$("#fax").val(e.company_detail.fax),$("#company_email").val(e.company_detail.company_email),$("#website").val(e.company_detail.website)}var r,o,s;if(null!=e.general_assumptions&&($("#rsvbl_in_days").val(e.general_assumptions.rsvbl_in_days).trigger("change"),$("#pybl_in_days").val(e.general_assumptions.pybl_in_days).trigger("change"),$("#vat_paid_in_days").val(e.general_assumptions.vat_paid_in_days).trigger("change"),$("#cmpnytx_paid_in_days").val(e.general_assumptions.cmpnytx_paid_in_days).trigger("change"),$("#marketing_increase").val(e.general_assumptions.marketing_increase),$("#public_reactions").val(e.general_assumptions.public_reactions),$("#administration_cost").val(e.general_assumptions.administration_cost),$("#other_increase").val(e.general_assumptions.other_increase),$("#company_tax").val(e.general_assumptions.company_tax),$("#company_vat_collected").val(e.general_assumptions.company_vat_collected),$("#company_vat").val(e.general_assumptions.company_vat),$("#opening_credit_balance").val(e.general_assumptions.opening_credit_balance),$("#opening_debit_balance").val(e.general_assumptions.opening_debit_balance),$("#opening_bank_balance").val(e.general_assumptions.opening_bank_balance),$("#franchise_royalty").val(e.general_assumptions.franchise_royalty),$("#porivision_baddebt").val(e.general_assumptions.porivision_baddebt),$("#depreciation_on_equipment").val(e.general_assumptions.depreciation_on_equipment),$("#servicesales_cost").val(e.general_assumptions.servicesales_cost),$("#servicecost_service").val(e.general_assumptions.servicecost_service)),e.directors.length>0)for(r=0;r<4;r++)s=e.directors[r].image?siteUrl+"assets/uploads/director_logo/"+e.directors[r].image:siteUrl+"assets/img/cbpLogoSmall_3x.png",o=r+1,$("#director_name_"+r).val(e.directors[r].name),$("#director_id_"+r).val(e.directors[r].id),$("#director_education_"+r).val(e.directors[r].education),$("#director_experience_"+r).val(e.directors[r].experience),$("#director_logo_"+r).fileinput({overwriteInitial:!0,maxFileSize:500,showClose:!1,showCaption:!1,browseLabel:"",removeLabel:"",previewClass:"company_setup",browseIcon:'<i class="fa fa-folder-open"></i>',removeIcon:'<i class="fa fa-remove"></i>',removeTitle:"Cancel or reset changes",elErrorContainer:"#kv-avatar-errors-"+o,msgErrorClass:"alert alert-block alert-danger",defaultPreviewContent:'<img id="imgfile_'+r+'" class="img-circle" src="'+s+'" alt="Director Logo" style="width:130px;height:130px;">',layoutTemplates:{main2:"{preview}  {remove} {browse} "},allowedFileExtensions:["jpg","png","gif"]});else for(r=0;r<4;r++)$("#director_logo_"+r).fileinput({overwriteInitial:!0,maxFileSize:500,showClose:!1,showCaption:!1,browseLabel:"",removeLabel:"",previewClass:"company_setup",browseIcon:'<i class="fa fa-folder-open"></i>',removeIcon:'<i class="fa fa-remove"></i>',removeTitle:"Cancel or reset changes",elErrorContainer:"#kv-avatar-errors-1",msgErrorClass:"alert alert-block alert-danger",defaultPreviewContent:'<img id="imgfile_'+r+'" class="img-circle" src="'+siteUrl+'assets/img/cbpLogoSmall_3x.png" alt="Director Logo" style="width:130px;height:130px;">',layoutTemplates:{main2:"{preview}  {remove} {browse} "},allowedFileExtensions:["jpg","png","gif"]})}function get_cost_per(e,t){return(t/e).toFixed(2)}function get_cost_per1(e,t){return(t*e).toFixed(2)}function delete_cosmetic(e){$("#modalConfirmYesNo").modal("show"),$("#lblTitleConfirmYesNo").html("User Confirmation"),$("#lblMsgConfirmYesNo").html("Are you sure you want to delete this product ??"),$("#btnYesConfirmYesNo").off("click").click(function(){delete_cosmetic_product(e),$("#modalConfirmYesNo").modal("hide")}),$("#btnNoConfirmYesNo").off("click").click(function(){$("#modalConfirmYesNo").modal("hide")})}function delete_cosmetic_product(e){$.ajax({type:"POST",url:siteUrl+"products/ajax-delete_cosmetic",dataType:"json",data:{get_id:e},success:function(e){$("#modalConfirmYes").modal("show"),$("#lblMsgConfirmYes").html("<div class='checkmark'><svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 161.2 161.2' enable-background='new 0 0 161.2 161.2' xml:space='preserve'><path class='path' fill='none' stroke='#7DB0D5' stroke-miterlimit='10' d='M425.9,52.1L425.9,52.1c-2.2-2.6-6-2.6-8.3-0.1l-42.7,46.2l-14.3-16.4c-2.3-2.7-6.2-2.7-8.6-0.1c-1.9,2.1-2,5.6-0.1,7.7l17.6,20.3c0.2,0.3,0.4,0.6,0.6,0.9c1.8,2,4.4,2.5,6.6,1.4c0.7-0.3,1.4-0.8,2-1.5c0.3-0.3,0.5-0.6,0.7-0.9l46.3-50.1C427.7,57.5,427.7,54.2,425.9,52.1z'/><circle class='path' fill='none' stroke='#7DB0D5' stroke-width='4' stroke-miterlimit='10' cx='80.6' cy='80.6' r='62.1'/><polyline class='path' fill='none' stroke='#28B463' stroke-width='6' stroke-linecap='round' stroke-miterlimit='10' points='113,52.8,74.1,108.4 48.2,86.4 '/><circle class='spin' fill='none' stroke='#7DB0D5' stroke-width='4' stroke-miterlimit='10' stroke-dasharray='12.2175,12.2175' cx='80.6' cy='80.6' r='73.9'/></svg></div><p class='alert-box'>Your product have been deleted successfully</p>"),load_category_items($("#ingredient-category").val()),resetcategoryform()}})}function edit_cosmetic_product(e){$("#myModal2").modal(),$("label.error").remove(),save_method="update",clearForm(),$(".form-group").removeClass("has-error"),$("#purchases").find("td input").each(function(){$(this).prop("readonly",!0)}),$("#sales_projection").find("td input").each(function(){$(this).prop("readonly",!0)}),$.ajax({type:"POST",url:siteUrl+"products/ajax-get_cosmeticproduct",dataType:"json",data:{get_id:e},success:function(e){if($("#product_form").show(),$("#product_id").val(e.product.id),$("#get_status").val("update"),$("#product_code").val(e.product.product_code),$("#product_description").val(e.product.Description),$("#indus_type").val("Cosmetics"),$("#monthlytable_qty").val(e.product.monthly_qty),$("#oq_1").val(e.product.oq_1),$("#sp_1").val(number_format(e.product.sp_1),0,".",","),$("#sp_2").val(number_format(e.product.sp_2),0,".",","),$("#sp_3").val(number_format(e.product.sp_3),0,".",","),$("#sp_4").val(number_format(e.product.sp_4),0,".",","),$("#sp_5").val(number_format(e.product.sp_5),0,".",","),$("#sp_6").val(number_format(e.product.sp_6),0,".",","),$("#sp_7").val(number_format(e.product.sp_7),0,".",","),$("#sp_8").val(number_format(e.product.sp_8),0,".",","),$("#sp_9").val(number_format(e.product.sp_9),0,".",","),$("#sp_10").val(number_format(e.product.sp_10),0,".",","),$("#sp_11").val(number_format(e.product.sp_11),0,".",","),$("#sp_12").val(number_format(e.product.sp_12),0,".",","),$("#p_1").val(number_format(e.product.p_1),0,".",","),$("#p_2").val(number_format(e.product.p_2),0,".",","),$("#p_3").val(number_format(e.product.p_3),0,".",","),$("#p_4").val(number_format(e.product.p_4),0,".",","),$("#p_5").val(number_format(e.product.p_5),0,".",","),$("#p_6").val(number_format(e.product.p_6),0,".",","),$("#p_7").val(number_format(e.product.p_7),0,".",","),$("#p_8").val(number_format(e.product.p_8),0,".",","),$("#p_9").val(number_format(e.product.p_9),0,".",","),$("#p_10").val(number_format(e.product.p_10),0,".",","),$("#p_11").val(number_format(e.product.p_11),0,".",","),$("#p_12").val(number_format(e.product.p_12),0,".",","),$("#markup_on_cost").val(e.product.MarkUpOnCost),TableCalculation(),"assets/images/default-avatar.png"!=e.product.ThumbNail)var t='<button type="button" class="btn btn-default" title="Restore default" onclick="restoreDefault('+e.product.id+')"><i class="fa fa-trash"></i></button>';else t="";$("#flnFile").fileinput("refresh",{overwriteInitial:!0,maxFileSize:500,showClose:!1,showCaption:!1,browseLabel:"",removeLabel:"",browseIcon:'<i class="fa fa-folder-open"></i>',removeIcon:'<i class="fa fa-remove"></i>',removeTitle:"Cancel or reset changes",elErrorContainer:"#kv-avatar-errors-1",msgErrorClass:"alert alert-block alert-danger",defaultPreviewContent:'<img id="imgfile" class="img-circle" src="'+siteUrl+e.product.ThumbNail+'" alt="Product Picture" style="width:180px;">',layoutTemplates:{main2:"{preview}  {remove} {browse} "+t},allowedFileExtensions:["jpg","png","gif"]}),load_category_items(1),updatesummarytable(),$("input").each(function(){var e=$(this);e.val()?e.addClass("used"):e.removeClass("used")}),$("#markup_on_cost").addClass("used"),$("#rrp_cost").addClass("used"),setTimeout(function(){products_cost=parseFloat($("#unit_cost").val()),rrp_cost=MarkUpOnCost=parseFloat($("#rrp_cost").val()),tableCalculationPrice()},2e3)}})}function edit_cosmetic(e){$.ajax({type:"POST",url:siteUrl+"products/ajax-get_singleproduct",dataType:"json",data:{get_id:e},success:function(e){$('#locaprodstep1-2 input[type="text"]').addClass("used"),$('#locaprodstep1-2 input[type="number"]').addClass("used"),$("#ingredient-category").val(e.product_sub_category),$("#base_purchase_volume").val(e.purchase_volume),$("#base_purchase_price").val(e.purchase_price),$("#base_volume").val(e.purchase_volume1),$("#base_cost_per").val(e.cost_per),$("#base_volume_cost").val(e.purchase_volume_cos1),$("#base_ingredients").val(e.product_var_name),$("#is_update").val("Update"),$("#upid").val(e.id)}})}function chknewproduct(){""==$("#product_id").val()?$.ajax({type:"POST",url:siteUrl+"products/ajax-create_new_item",dataType:"json",success:function(e){$("#product_id").val(e),$("#get_status").val("update"),saveCategoryItem()}}):saveCategoryItem()}function saveCategoryItem(){var e=!0;if(""==$("#base_ingredients").val()&&($("#base_ingredients").parent("div").parent("div").addClass("has-error"),e=!1),""==$("#base_purchase_volume").val()&&($("#base_purchase_volume").parent("div").parent("div").addClass("has-error"),e=!1),""==$("#base_purchase_price").val()&&($("#base_purchase_price").parent("div").parent("div").addClass("has-error"),e=!1),""==$("#base_cost_per").val()&&($("#base_cost_per").parent("div").parent("div").addClass("has-error"),e=!1),""==$("#base_volume").val()&&($("#base_volume").parent("div").parent("div").addClass("has-error"),e=!1),""==$("#base_volume_cost").val()&&($("#base_volume_cost").parent("div").parent("div").addClass("has-error"),e=!1),0==e)return!1;var t=$("#upid").val();if("Add"==$("#is_update").val())var a=siteUrl+"products/ajax-save_category_item";else if("Update"==$("#is_update").val())a=siteUrl+"products/ajax-update_category_item";$.ajax({type:"POST",url:a,dataType:"json",data:{base_ingredients:$("#base_ingredients").val(),base_purchase_volume:$("#base_purchase_volume").val(),base_purchase_price:$("#base_purchase_price").val(),base_cost_per:$("#base_cost_per").val(),base_volume:$("#base_volume").val(),base_volume_cost:$("#base_volume_cost").val(),ingredient_category:$("#ingredient-category").val(),update_id:t,drops:$("#drops").val(),cost_per_drop:$("#cost_per_drop").val(),product_id:$("#product_id").val()},success:function(e){$("#modalConfirmYes").modal("show"),$("#lblMsgConfirmYes").html("<div class='checkmark'><svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 161.2 161.2' enable-background='new 0 0 161.2 161.2' xml:space='preserve'><path class='path' fill='none' stroke='#7DB0D5' stroke-miterlimit='10' d='M425.9,52.1L425.9,52.1c-2.2-2.6-6-2.6-8.3-0.1l-42.7,46.2l-14.3-16.4c-2.3-2.7-6.2-2.7-8.6-0.1c-1.9,2.1-2,5.6-0.1,7.7l17.6,20.3c0.2,0.3,0.4,0.6,0.6,0.9c1.8,2,4.4,2.5,6.6,1.4c0.7-0.3,1.4-0.8,2-1.5c0.3-0.3,0.5-0.6,0.7-0.9l46.3-50.1C427.7,57.5,427.7,54.2,425.9,52.1z'/><circle class='path' fill='none' stroke='#7DB0D5' stroke-width='4' stroke-miterlimit='10' cx='80.6' cy='80.6' r='62.1'/><polyline class='path' fill='none' stroke='#28B463' stroke-width='6' stroke-linecap='round' stroke-miterlimit='10' points='113,52.8,74.1,108.4 48.2,86.4 '/><circle class='spin' fill='none' stroke='#7DB0D5' stroke-width='4' stroke-miterlimit='10' stroke-dasharray='12.2175,12.2175' cx='80.6' cy='80.6' r='73.9'/></svg></div><p class='alert-box'>Your changes have been saved successfully</p>"),load_category_items($("#ingredient-category").val()),resetcategoryform(),updatesummarytable()}})}function updatesummarytable(){if(""!=$("#product_id").val()){var e=0,t=0,a=0,r=0,o=0,s=0,n=0;$.ajax({type:"GET",url:siteUrl+"products/ajax-get_all_category",dataType:"json",data:{product_id:$("#product_id").val()},success:function(i){for(var l=0;l<i.length;l++)1==i[l].product_sub_category?e=parseFloat(e)+parseFloat(i[l].cost_per):2==i[l].product_sub_category?t=parseFloat(t)+parseFloat(i[l].cost_per):3==i[l].product_sub_category?a=parseFloat(a)+parseFloat(i[l].cost_per):4==i[l].product_sub_category?r=parseFloat(r)+parseFloat(i[l].cost_per):5==i[l].product_sub_category?o=parseFloat(o)+parseFloat(i[l].cost_per):6==i[l].product_sub_category&&(s=parseFloat(s)+parseFloat(i[l].cost_per)),n=parseFloat(n)+parseFloat(i[l].cost_per);0==n?$("#total_unit").html(cur+n):($("#total_unit").html(cur+number_format(n,2,".",",")),$("#unit_cost").val(number_format(n,2,".",",")),$("#rrp_cost").val(number_format(n,2,".",","))),0==e?$("#bi_unit").html(cur+e):$("#bi_unit").html(cur+number_format(e,2,".",",")),0==a?$("#p_unit").html(cur+a):$("#p_unit").html(cur+number_format(a,2,".",",")),0==r?$("#dh_unit").html(cur+r):$("#dh_unit").html(cur+number_format(r,2,".",",")),0==o?$("#pac_unit").html(cur+o):$("#pac_unit").html(cur+number_format(o,2,".",",")),0==s?$("#bnd_unit").html(cur+s):$("#bnd_unit").html(cur+number_format(s,2,".",",")),0==t?$("#aing_unit").html(cur+t):$("#aing_unit").html(cur+number_format(t,2,".",",")),update_summary_table(),update_rrp()}})}setTimeout(function(){products_cost=parseFloat($("#unit_cost").val()),rrp_cost=MarkUpOnCost=parseFloat($("#rrp_cost").val()),tableCalculationPrice()},1e3)}function load_category_items(e){""!=$("#product_id").val()&&$.ajax({type:"GET",url:siteUrl+"products/ajax-get_category_item_list",dataType:"html",data:{cat_id:e,product_id:$("#product_id").val()},success:function(e){$("#productitemslist").html(e)}})}function resetcategoryform(){$("#is_update").val("Add"),$("#base_purchase_volume").val(""),$("#base_purchase_price").val(""),$("#base_volume").val(""),$("#base_cost_per").val(""),$("#base_volume_cost").val(""),$("#base_ingredients").val(""),$("#locaprodstep1-2 .form-group").removeClass("has-error")}function TableCalculation_cosmetic(){TableCalculation(),setTimeout(function(){products_cost=parseFloat($("#unit_cost").val()),rrp_cost=MarkUpOnCost=parseFloat($("#rrp_cost").val()),tableCalculationPrice()},500)}function update_rrp(){var e=parseFloat($("#total_unit").html().replace(/[^\d\.]/g,""))+parseFloat($("#total_unit").html().replace(/[^\d\.]/g,""))*(parseFloat($("#markup_on_cost").val())/100);$("#rrp_cost").val(number_format(e,2,".",","));var t=e-parseFloat($("#total_unit").html().replace(/[^\d\.]/g,""));$("#gross_profit").val(cur+number_format(t,2,".",","));var a=$("#monthlytable_qty").val()*e;$("#monthly_revenue").val(cur+number_format(a,2,".",","));var r=a-parseFloat($("#total_prod").html().replace(/[^\d\.]/g,""));$("#monthly_gross_profit").val(cur+number_format(r,2,".",",")),setTimeout(function(){products_cost=parseFloat($("#unit_cost").val()),rrp_cost=MarkUpOnCost=parseFloat($("#rrp_cost").val()),tableCalculationPrice()},500)}function update_summary_table(){var e=parseFloat($("#bi_unit").html().replace(/[^\d\.]/g,""))*parseFloat($("#monthlytable_qty").val()).toFixed(2),t=parseFloat($("#p_unit").html().replace(/[^\d\.]/g,""))*parseFloat($("#monthlytable_qty").val()).toFixed(2),a=parseFloat($("#dh_unit").html().replace(/[^\d\.]/g,""))*parseFloat($("#monthlytable_qty").val()).toFixed(2),r=parseFloat($("#pac_unit").html().replace(/[^\d\.]/g,""))*parseFloat($("#monthlytable_qty").val()).toFixed(2),o=parseFloat($("#bnd_unit").html().replace(/[^\d\.]/g,""))*parseFloat($("#monthlytable_qty").val()).toFixed(2),s=parseFloat($("#aing_unit").html().replace(/[^\d\.]/g,""))*parseFloat($("#monthlytable_qty").val()).toFixed(2),n=e+t+a+r+o+s;0==n?$("#total_prod").html(cur+n):$("#total_prod").html(cur+number_format(n,2,".",",")),0==e?$("#bi_prod").html(cur+e):$("#bi_prod").html(cur+number_format(e,2,".",",")),0==t?$("#p_prod").html(cur+t):$("#p_prod").html(cur+number_format(t,2,".",",")),0==a?$("#dh_prod").html(cur+a):$("#dh_prod").html(cur+number_format(a,2,".",",")),0==r?$("#pac_prod").html(cur+r):$("#pac_prod").html(cur+number_format(r,2,".",",")),0==o?$("#bnd_prod").html(cur+o):$("#bnd_prod").html(cur+number_format(o,2,".",",")),0==s?$("#aing_prod").html(cur+s):$("#aing_prod").html(cur+number_format(s,2,".",",")),update_rrp()}if($("#setting_form").validate({invalidHandler:function(e,t){t.numberOfInvalids()&&$('.nav a[href="#'+jQuery(t.errorList[0].element).closest(".tab-pane").attr("id")+'"]').tab("show")},ignore:"",rules:{company_name:"required",abn_no:"required",start_date:"required",street_no:"required",street_name:"required",suburb:"required",state:"required",zipcode:"required",country:"required",fax:{required:!0},company_email:{required:!0,email:!0},website:{url:!0},company_tax:{required:!0},company_vat_collected:{required:!0},opening_debit_balance:{required:!0},opening_credit_balance:{required:!0},marketing_increase:{required:!0},public_reactions:{required:!0},administration_cost:{required:!0},opening_bank_balance:{required:!0},other_increase:{required:!0},franchise_royalty:{required:!0},porivision_baddebt:{required:!0},depreciation_on_equipment:{required:!0}},messages:{company_tax:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time",company_vat:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time",opening_debit_balance:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time",opening_credit_balance:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time",marketing_increase:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time",public_reactions:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time",administration_cost:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time",opening_bank_balance:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time",other_increase:"Please enter a value in all fields, if you are not sure enter 0 to continue, you can change this at any time",franchise_royalty:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time",porivision_baddebt:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time",depreciation_on_equipment:"Please enter a value in all fields, if you are not sure enter  0 to continue, you can change this at any time"}}),$("#base_purchase_volume").keyup(function(){var e=get_cost_per($("#base_purchase_volume").val(),$("#base_purchase_price").val());$("#base_cost_per").val(e)}),$("#base_purchase_price").keyup(function(){var e=get_cost_per($("#base_purchase_volume").val(),$("#base_purchase_price").val());$("#base_cost_per").val(e)}),$("#base_volume").keyup(function(){var e=get_cost_per1($("#base_volume").val(),$("#base_cost_per").val());$("#base_volume_cost").val(e)}),$("#add_base_ingredient").click(function(){$(".add_ingredient_form").slideToggle("slow",function(){})}),$(document).on("click","#save_comsetting",function(e){$("#company_setting_form").submit()}),$(document).on("change","#ingredient-category",function(e){var t=this.value;switch(t){case"1":$("#cp1").text("Base ingredients purchase cost assumptions"),$("#cp2").text("Base ingredients"),$("#cp6").text("Ingredients cost per product"),$("#cp7").text("Base Ingredient Volume"),$("#cp8").text("Ingredient cost per product"),$("#added_ingredients_extra").addClass("hide");break;case"3":$("#cp1").text("Powders purchase cost assumptions"),$("#cp2").text("Powders"),$("#cp6").text("Powders cost per product"),$("#cp7").text("Powder Volume"),$("#cp8").text("Powder cost per product"),$("#added_ingredients_extra").addClass("hide");break;case"4":$("#cp1").text("Dried Herbs purchase cost assumptions"),$("#cp2").text("Dried Herbs"),$("#cp6").text("Dried Herbs cost per product"),$("#cp7").text("Dried Herbs Volume"),$("#cp8").text("Dried Herbs cost per product"),$("#added_ingredients_extra").addClass("hide");break;case"5":$("#cp1").text("Packaging/container purchase cost assumptions"),$("#cp2").text("Packaging/containe"),$("#cp6").text("Packaging/container cost per product"),$("#cp7").text("Packaging/container Volume"),$("#cp8").text("Packaging/container cost per product"),$("#added_ingredients_extra").addClass("hide");break;case"6":$("#cp1").text("Branding purchase cost assumptions"),$("#cp2").text("Branding"),$("#cp6").text("Branding cost per product"),$("#cp7").text("Branding Volume"),$("#cp8").text("Branding cost per product"),$("#added_ingredients_extra").addClass("hide");break;case"2":$("#cp1").text("Added ingredients purchase cost assumptions"),$("#cp2").text("Added ingredients"),$("#cp6").text("Added ingredients cost per product"),$("#cp7").text("Added ingredients Volume"),$("#cp8").text("Added ingredients cost per product"),$("#added_ingredients_extra").removeClass("hide")}resetcategoryform(),load_category_items(t)}),$(document).on("change","#drops",function(e){$("#cost_per_drop").val($("#base_purchase_price").val()/$("#drops").val())}),$(document).on("keyup","#markup_on_cost",function(e){update_rrp()}),$(document).on("keyup","#monthlytable_qty",function(e){update_summary_table()}),$(document).on("change","#rrp_cost",function(e){products_cost=parseFloat($("#unit_cost").val()),rrp_cost=MarkUpOnCost=parseFloat($("#rrp_cost").val()),TableCalculation()}),$("#ingredient-category").length){function formatRepo(e){if(e.loading)return e.text;var t="<div class='select2-result-repository clearfix'><div class='select2-result-repository__meta'><div class='select2-result-repository__title'>"+e.name+"</div>";return t+="<div class='select2-result-repository__statistics'><div class='select2-result-repository__forks'> Price - "+e.price+"</div><div class='select2-result-repository__watchers'>Quantity - "+e.quantity+"</div></div></div></div>"}function formatRepoSelection(e){return e.name||e.text}$("#ingredient-category").select2(),$(".js-example-data-ajax").select2({ajax:{url:siteUrl+"products/ajax-get_category_items",dataType:"json",delay:250,data:function(e){return{q:e.term,category:$("#ingredient-category").select2().val(),page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:30*t.page<e.total_count}}},cache:!0},placeholder:"Search for ...",escapeMarkup:function(e){return e},minimumInputLength:1,templateResult:formatRepo,templateSelection:formatRepoSelection}),load_category_items($("#ingredient-category").val())}function initiate_step_wizard(e,t){var a=$(e+" div a"),r=$(t),o=$(".nextBtn");r.hide(),a.click(function(e){parseInt($(this).text());e.preventDefault();var t=$($(this).attr("href")),o=$(this);o.attr("disabled")||(a.removeClass("btn-primary").addClass("btn-default"),o.addClass("btn-primary"),r.hide(),t.show())}),o.click(function(){var a=$(this).closest(t),r=a.attr("id"),o=$(e+' div a[href="#'+r+'"]').parent().next().children("a"),s=a.find("input[type='text'],input[type='url']"),n=!0;$(".form-group").removeClass("has-error");for(var i=0;i<s.length;i++)s[i].validity.valid||(n=!1,$(s[i]).closest(".form-group").addClass("has-error"));n&&o.removeAttr("disabled").trigger("click")}),$(e+" div a.btn-primary").trigger("click")}$("#company_setting_form").submit(function(e){var t=new FormData($(this)[0]);$.ajax({type:"POST",url:siteUrl+"company_setup/ajax-setupCompany",dataType:"json",data:t,cache:!1,contentType:!1,processData:!1,success:function(e){$("#myModal").modal("hide"),$("#modalConfirmYes").modal("show"),$("#lblMsgConfirmYes").html("<div class='checkmark'><svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 161.2 161.2' enable-background='new 0 0 161.2 161.2' xml:space='preserve'><path class='path' fill='none' stroke='#7DB0D5' stroke-miterlimit='10' d='M425.9,52.1L425.9,52.1c-2.2-2.6-6-2.6-8.3-0.1l-42.7,46.2l-14.3-16.4c-2.3-2.7-6.2-2.7-8.6-0.1c-1.9,2.1-2,5.6-0.1,7.7l17.6,20.3c0.2,0.3,0.4,0.6,0.6,0.9c1.8,2,4.4,2.5,6.6,1.4c0.7-0.3,1.4-0.8,2-1.5c0.3-0.3,0.5-0.6,0.7-0.9l46.3-50.1C427.7,57.5,427.7,54.2,425.9,52.1z'/><circle class='path' fill='none' stroke='#7DB0D5' stroke-width='4' stroke-miterlimit='10' cx='80.6' cy='80.6' r='62.1'/><polyline class='path' fill='none' stroke='#28B463' stroke-width='6' stroke-linecap='round' stroke-miterlimit='10' points='113,52.8,74.1,108.4 48.2,86.4 '/><circle class='spin' fill='none' stroke='#7DB0D5' stroke-width='4' stroke-miterlimit='10' stroke-dasharray='12.2175,12.2175' cx='80.6' cy='80.6' r='73.9'/></svg></div><p class='alert-box'>Your changes have been saved successfully</p>"),setTimeout(function(){location.reload()},3e3)}}),e.preventDefault()}),$("#planningstep1").length&&initiate_step_wizard(".planningstep1-panel",".planningstep1-content"),$("#planningstep2").length&&initiate_step_wizard(".planningstep2-panel",".planningstep2-content"),$("#planningstep3").length&&initiate_step_wizard(".planningstep3-panel",".planningstep3-content"),$("#planningstep4").length&&initiate_step_wizard(".planningstep4-panel",".planningstep4-content"),$("#contractstep").length&&initiate_step_wizard(".contract-panel",".contract-content"),$("#peoplestep").length&&initiate_step_wizard(".people-panel",".people-content"),$("#planningstep5").length&&initiate_step_wizard(".planningstep5-panel",".planningstep5-content"),$(".setup-panel1").length&&initiate_step_wizard(".setup-panel1",".setup-content1"),$("#localproductstep1").length&&initiate_step_wizard(".locaprod1-panel",".locaprod1-content"),$("#importproductstep1").length&&initiate_step_wizard(".importprod1-panel",".importprod1-content"),$("#locaprodstep1-1").length&&initiate_step_wizard(".prodprofile1-panel",".prodprofile1-content"),function(e){e.each(["show","hide"],function(t,a){var r=e.fn[a];e.fn[a]=function(){return this.trigger(a),r.apply(this,arguments)}})}(jQuery);